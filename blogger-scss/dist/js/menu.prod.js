"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Menu=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,t),this.menu=e,this.menu_obj=[],this.menu_html=""}return _createClass(t,[{key:"renderMenuObject",value:function(){var t=this;this.getMainParents().forEach(function(e){t.menu_obj.push(t.renderMenuItem(e,0))})}},{key:"renderMenuItem",value:function(e,t){var n=this,r={deep:t,title:e.title,url:e.url,childs:[]};return t+=1,this.getSubs(this.menu.indexOf(e)).forEach(function(e){r.childs.push(n.renderMenuItem(e,t))}),r}},{key:"getSubs",value:function(e){for(var t=this.countUnder(this.menu[e].title),n=[],r=e+1;r<this.menu.length;r++){var u=this.menu[r];if(this.countUnder(u.title)!=t+1){if(this.countUnder(u.title)>t+1)continue;break}n.push(u)}return n}},{key:"countUnder",value:function(e){for(var t=Array.from(e),n="_",r=0,u=0;u<t.length;u++){var i=t[u];"_"==i&&"_"==n&&(r+=1,n=i)}return r}},{key:"getMainParents",value:function(){for(var e=[],t=0;t<this.menu.length;t++){var n=this.menu[t];0==this.countUnder(n.title)&&e.push(n)}return e}},{key:"clearUnder",value:function(e){for(var t=Array.from(e),n="",r=0;r<t.length;r++){var u=t[r];"_"!=u&&(n+=u)}return n}},{key:"renderMenuItemHtml",value:function(e){var t,n=this,r=$("<li>",{class:"sd-menu-item"});return 0<e.childs.length?(r.append($("<span>").html('<a href="'.concat(e.url,'">').concat(this.clearUnder(e.title),'</a> <i class="material-icons">keyboard_arrow_right</i>'))),r.addClass("sd-has-sub-menu"),t=$("<ul>",{class:"sd-sub-menu".concat(e.deep+1,"-list")}),e.childs.forEach(function(e){t.html(t.html()+n.renderMenuItemHtml(e))}),r.html(r.html()+t[0].outerHTML)):r.append($("<a>",{href:e.url}).html("".concat(this.clearUnder(e.title)))),r[0].outerHTML}},{key:"renderMenuHTML",value:function(){var t=this;this.renderMenuObject();var e=$("<ul>",{class:"sd-menu-list"});this.menu_obj.forEach(function(e){t.menu_html+=t.renderMenuItemHtml(e)}),e.html(this.menu_html),this.menu_html=e[0].outerHTML}}]),t}();jQuery(document).ready(function(){var n=jQuery;n.fn.addMenu=function(e){var t=new Menu(e);t.renderMenuHTML(),n(this).html(t.menu_html)},n.fn.mobileMenuInit=function(){n(".sd-menu-list .sd-has-sub-menu i").click(function(e){e.preventDefault(),e.stopPropagation();var t=n(e.currentTarget);"keyboard_arrow_down"!=t.text()?t.text("keyboard_arrow_down"):t.text("keyboard_arrow_right"),n(e.currentTarget).closest("li").children("ul").slideToggle()}),n(".sd-menu-toggle").click(function(e){e.preventDefault(),e.stopPropagation(),n(".sd-mobile-menu").slideToggle()})}});